{"version":3,"file":"hp-components.js.map","sources":["ng://hp-components/lib/hp-components.service.ts","ng://hp-components/lib/scripts/math.ts","ng://hp-components/lib/scripts/dom.ts","ng://hp-components/lib/services/drag.service.ts","ng://hp-components/lib/services/size.service.ts","ng://hp-components/lib/selector/selector.service.ts","ng://hp-components/lib/interaction/interaction.service.ts","ng://hp-components/lib/interaction/interaction.component.ts","ng://hp-components/lib/composer/composer.component.ts","ng://hp-components/lib/treeview/treeview.component.ts","ng://hp-components/lib/treeview/treeview-item/treeview-item.component.ts","ng://hp-components/lib/selector/selector.component.ts","ng://hp-components/lib/file-manager/file-manager.component.ts","ng://hp-components/lib/property-grid/property-grid.component.ts","ng://hp-components/lib/hp-components.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HpComponentsService {\n\n  constructor() { }\n}\n","export class Rect {\n  constructor(public left: number = 0, public top: number = 0, public width: number = 0, public height: number = 0) { }\n  get right(): number {\n    return this.left + this.width;\n  }\n  get bottom(): number {\n    return this.top + this.height;\n  }\n  get isEmpty(): boolean {\n    return (this.height + this.width) === 0;\n  }\n  get topLeft(): Point {\n    return new Point(this.left, this.top);\n  }\n  get topRight(): Point {\n    return new Point(this.right, this.top);\n  }\n  get bottomLeft(): Point {\n    return new Point(this.left, this.bottom);\n  }\n  get bottomRight(): Point {\n    return new Point(this.right, this.bottom);\n  }\n\n}\nexport class Size {\n  constructor(public height: number = 0, public width: number = 0) { }\n}\n\nexport class Point {\n  constructor(public x: number = 0, public y: number = 0) { }\n  add(point: Point) {\n    this.x = this.x + point.x;\n    this.y = this.y + point.y;\n  }\n  subtract(point: Point) {\n    this.x = this.x - point.x;\n    this.y = this.y - point.y;\n  }\n}\n","import {Point, Rect, Size} from './math';\nimport {Renderer2} from '@angular/core';\n\nexport function offset2(el: HTMLElement): Point {\n   const result = new Point(el.offsetLeft, el.offsetTop);\n   if (el.parentElement) {\n     result.add(offset(el.parentElement));\n   }\n   return result;\n}\n\nexport function offset(el: HTMLElement): Point {\n  const box = el.getBoundingClientRect();\n  const top = box.top;\n  const left = box.left;\n  return new Point(left, top);\n}\n\nexport function pixToNum(value: string): number {\n  if (!value || value.length === 0) {\n    return 0;\n  }\n  const newValue = value.replace('px', '').replace('em', '');\n  return parseFloat(newValue);\n}\n\nexport function numToPix(value: number, autoWhenZero: boolean = false): string {\n  if (value == null) {\n    value = 0;\n  }\n  if (autoWhenZero && value === 0) {\n    return 'auto';\n  }\n  return value.toString() + 'px';\n}\n\nexport function childElements(element: HTMLElement, orderByZOrder = false): HTMLElement[] {\n  const result = new Array<HTMLElement>();\n  if (!element) {\n    return result;\n  }\n  const children = element.children;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i] as HTMLElement;\n    if (child && child.parentElement === element &&\n      child.className.indexOf('hpc-lasso-selector') === -1 &&\n      child.className.indexOf('hpc-element-selector') === -1 &&\n      child.className.indexOf('grip') === -1) {\n      result.push(child);\n    }\n  }\n\n  if (orderByZOrder) {\n    // result = Enumerable.from(result).orderBy(x => parseInt(x.style.zIndex, NaN)).toArray();\n  }\n  return result;\n}\n\nexport function removeHelperChildren(children: HTMLElement[]) {\n  for (let i = children.length - 1; i >= 0; i--) {\n    const child = children[i] as HTMLElement;\n    if (child.className.indexOf('hpc-lasso-selector') > -1 ||\n      child.className.indexOf('hpc-element-selector') > -1 ||\n      child.className.indexOf('hpc-drag-overlay') > -1 ||\n      child.className.indexOf('grip-container') > -1 ||\n      child.className.indexOf('grip') > -1) {\n      removeArrayItem(children, child);\n    }\n  }\n}\n\n\nexport function removeArrayItem(array: any[], item: any) {\n  const index = typeof(item) === 'number' ? item : array.indexOf(item) ;\n  if (index > -1) {\n    array.splice(index, 1);\n  }\n}\n\nexport function intersect(a: Rect, b: Rect): boolean {\n  return (a.left <= b.right &&\n    b.left <= a.right &&\n    a.top <= b.bottom &&\n    b.top <= a.bottom);\n}\n\nexport function  elementsAtRect(parent: HTMLElement, rect: Rect, exclude: HTMLElement[] = []) {\n  const result = [];\n    childElements(parent).forEach(element => {\n    if (intersect(elementBounds(element), rect)) {\n      if (exclude == null || exclude.indexOf(element) === -1) {\n        result.push(element);\n      }\n    }\n  });\n  return result;\n}\n\nexport function elementPos(element: HTMLElement): Point {\n  const computedStyles = getComputedStyle(element, null);\n  return new Point(pixToNum(computedStyles.left), pixToNum(computedStyles.top));\n}\n\nexport function elementSize(element: HTMLElement): Size {\n  const computedStyles = getComputedStyle(element, null);\n  return new Size(pixToNum(computedStyles.height), pixToNum(computedStyles.width));\n}\n\nexport function elementBounds(element: HTMLElement, relativeToPage: boolean = false, scale: Point = null): Rect {\n  let pos = elementPos(element);\n  if (relativeToPage) {\n    pos = elementPagePos(element);\n  }\n  const size = elementSize(element);\n  if (scale) {\n    size.width = size.width * scale.x;\n    size.height = size.height * scale.y;\n  }\n  return new Rect(pos.x, pos.y, size.width, size.height);\n}\n\nexport function elementPagePos(element: HTMLElement): Point {\n  const result = elementPos(element);\n  if (element.parentElement == null) {\n    return result;\n  }\n  let left = result.x;\n  let top = result.y;\n  const parents = parentTree(element);\n  parents.forEach(parent => {\n    left += pixToNum(parent.style.left) + parent.clientLeft;\n    top += pixToNum(parent.style.top) + parent.clientTop;\n  });\n  return new Point(left, top);\n}\n\n\nexport function parentTree(element: HTMLElement, lastClass: string = 'surface', inclusive = false): Array<HTMLElement> {\n  const result = new Array<HTMLElement>();\n  if (!element) {\n    return result;\n  }\n  let parent = element.parentElement;\n  while (parent != null) {\n    if (!inclusive && parent.classList.contains(lastClass)) {\n      break;\n    }\n    result.push(parent);\n    if (parent.classList.contains(lastClass)) {\n      break;\n    }\n    parent = parent.parentElement;\n  }\n  return result;\n}\n\nexport function moveElementTo(renderer: Renderer2, element: HTMLElement, position: Point): void {\n  if (!element) { return; }\n  renderer.setStyle(element, 'top', position.y + 'px');\n  renderer.setStyle(element, 'left', position.x + 'px');\n}\n\nexport function moveElementBy(renderer: Renderer2, element, delta: Point) {\n  if (!element) { return; }\n  const pos = elementPos(element);\n  const top = pos.y + delta.y;\n  const left = pos.x + delta.x;\n  renderer.setStyle(element, 'top', top + 'px');\n  renderer.setStyle(element, 'left', left + 'px');\n}\n\nexport function sizeElementBy(renderer: Renderer2, element, delta: Point) {\n  if (!element) { return; }\n  const size = elementSize(element);\n  const height = size.height + delta.y;\n  const width = size.width + delta.x;\n  renderer.setStyle(element, 'height', height + 'px');\n  renderer.setStyle(element, 'width', width + 'px');\n}\n\nexport function assignBoundingRect(renderer: Renderer2, source: HTMLElement, target: HTMLElement) {\n  const sourceRect = elementBounds(source);\n  // const styles = getComputedStyle(source);\n  const top = sourceRect.top; // + pixToNum(styles.marginTop);\n  const left = sourceRect.left; // + pixToNum(styles.marginLeft);\n  renderer.setStyle(target, 'top', top + 'px');\n  renderer.setStyle(target, 'left', left + 'px');\n  renderer.setStyle(target, 'height', sourceRect.height + 'px');\n  renderer.setStyle(target, 'width', sourceRect.width + 'px');\n}\n\nexport function assignPosition(renderer: Renderer2, source: HTMLElement, target: HTMLElement) {\n  const sourceRect = elementBounds(source);\n  const pos = elementPos(source);\n  renderer.setStyle(target, 'top', pos.y + 'px');\n  renderer.setStyle(target, 'left', pos.x + 'px');\n}\n\nexport function setElementRect(renderer: Renderer2, rect: Rect, element: HTMLElement) {\n  renderer.setStyle(element, 'top', rect.top + 'px');\n  renderer.setStyle(element, 'left', rect.left + 'px');\n  renderer.setStyle(element, 'height', rect.height + 'px');\n  renderer.setStyle(element, 'width', rect.width + 'px');\n}\n\nexport function childrenOf(parent: HTMLElement, deep = false, exclude = []): HTMLElement[] {\n  let result = [];\n  if (parent) {\n    if (deep) {\n      result = Array.from(parent.querySelectorAll('*'));\n    } else {\n      result = Array.from(parent.children);\n    }\n    removeHelperChildren(result);\n    result = result.filter(x => !(x in exclude));\n  }\n  return result;\n}\n\nexport function pointInRect(point: Point, rect: Rect): boolean {\n  return point.x >= rect.left && point.x <= rect.right && point.y >= rect.top && point.y <= rect.bottom;\n}\n\n/**\n* Returns the first child element of the parent element at a given point.\n* If there are no child elements at the given point, then the parent element is returned.\n*/\nexport function elementAtPoint(pos: Point, parent: HTMLElement, exclude = []): HTMLElement {\n    let result = parent;\n    const children = childrenOf(parent, false, exclude);\n    for (let index = 0; index < children.length; index++) {\n      const child = children[index];\n      const elRect = child.getBoundingClientRect();\n      const rect = new Rect(elRect.left, elRect.top, elRect.width, elRect.height);\n      if (exclude.indexOf(child) === -1 && pointInRect(pos, rect)) {\n        result = elementAtPoint(pos, child, exclude);\n        break;\n       }\n    }\n    return result;\n}\n\nexport function xelementAtPoint(pos: Point, parent: HTMLElement, exclude = []): HTMLElement {\n  let result = parent;\n  const children = childElements(parent);\n  for (let index = 0; index < children.length; index++) {\n    const child = children[index];\n    const elRect = child.getBoundingClientRect();\n    const rect = new Rect(elRect.left, elRect.top, elRect.width, elRect.height);\n    if (exclude.indexOf(child) === -1 && pointInRect(pos, rect)) {\n      result = child;\n      break;\n    }\n  }\n  return result;\n}\n\nexport function changeParent(element: HTMLElement, newParent: HTMLElement, renderer: Renderer2) {\n  if (!newParent || element.parentElement === newParent) {\n    return;\n  }\n  const parentPos = elementPagePos(newParent);\n  const elPos = elementPagePos(element);\n  const newPos = new Point(elPos.x - parentPos.x, elPos.y - parentPos.y);\n  renderer.appendChild(newParent, element);\n  moveElementTo(renderer, element, newPos);\n}\n\nexport function getScaledPos(element: HTMLElement, scale: number): Point {\n    const pos = offset(element);\n    return new Point(\n      pos.x / scale,\n      pos.y / scale\n    );\n}\n\nexport function getRelativePointerPos(e: PointerEvent, element: HTMLElement, scale = 1) {\n  const relativePos = offset(element);\n  return new Point(\n    (e.pageX - relativePos.x) / scale,\n    (e.pageY - relativePos.y) / scale\n  );\n}\n\nexport function elementDraggable(element: Element) {\n  return !elementLocked(element) && element.className.indexOf('hpc-no-drag') === -1;\n}\n\nexport function elementSizable(element: Element) {\n  return !elementLocked(element) && element.className.indexOf('hpc-no-size') === -1;\n}\n\nexport function elementLocked(element: Element): boolean {\n  return element.className.indexOf('hpc-locked') > -1;\n}\n\nexport function isContainer(element: Element): boolean {\n  return element.classList.contains('hpc-container');\n}\n\nexport function isSelectable(element: Element): boolean {\n  return !element.classList.contains('hpc-no-select');\n}\n\n\n","import { Injectable, Renderer2, OnDestroy } from '@angular/core';\nimport { Point } from '../scripts/math';\nimport * as dom from '../scripts/dom';\n\n@Injectable()\nexport class DragService implements OnDestroy  {\n  dragCursor = 'move';\n  renderer: Renderer2;\n\n  constructor() {}\n\n  createDragOverlay(element: HTMLElement): HTMLElement {\n    const result = element.cloneNode(true) as HTMLElement;\n    this.renderer.addClass(result, 'hpc-drag-overlay');\n    this.renderer.setStyle(result, 'cursor', this.dragCursor);\n    this.renderer.setStyle(result, 'zIndex', 10000);\n    return result;\n  }\n\n  dragElementsBy(delta: Point, elements: HTMLElement[]) {\n    elements.forEach(element => {\n      if (element) {\n        dom.moveElementBy(this.renderer, element, delta);\n      }\n    });\n  }\n\n  canDrag(element: Element): boolean {\n    return dom.elementDraggable(element);\n  }\n\n  /**\n   * Returns a child HTMLElement located at the top-left coordinates of the\n   * draggedElement with an attribute of is-dropzone set to true.\n   *\n   * @param HTMLElement draggedElement\n   * @param HTMLElement parent\n   * @returns HTMLElement\n   */\n  findDropZone(draggedElement: HTMLElement, parent: HTMLElement, exclude = []): HTMLElement {\n    if (!draggedElement) {\n      return null;\n    }\n    exclude.push(draggedElement);\n    const pos = dom.offset(draggedElement);\n    const el = dom.elementAtPoint(pos, parent, exclude);\n    if (el !== parent && el.classList.contains('hpc-dropzone')) {\n      return el;\n    }\n    return null;\n  }\n\n  updateDropZone(draggedElement: HTMLElement, parent: HTMLElement, exclude = []): HTMLElement {\n    this.clearDropZones(parent);\n    const dropZone = this.findDropZone(draggedElement, parent, exclude);\n    if (dropZone) {\n      this.renderer.addClass(dropZone, 'active');\n    }\n    return dropZone;\n  }\n\n  clearDropZones(parent: HTMLElement) {\n    const children = dom.childrenOf(parent, true);\n    children.forEach(child => {\n      this.renderer.removeClass(child, 'active');\n    });\n  }\n\n  dropElement(dropZone: HTMLElement, draggedElement: HTMLElement,  parent: HTMLElement) {\n      try {\n        dom.changeParent(draggedElement, dropZone, this.renderer);\n      } catch (error) {\n        console.log(error);\n        // -- todo log error;\n      }\n  }\n\n\n  ngOnDestroy(): void {\n    this.renderer = null;\n  }\n}\n","import { Injectable, Renderer2, OnDestroy } from '@angular/core';\nimport * as dom from '../scripts/dom';\nimport { Point, Rect } from '../scripts/math';\n\n@Injectable()\nexport class SizeService implements OnDestroy {\n  renderer: Renderer2;\n\n  get isHorizontalSizing(): boolean {\n    return this.gripKey === 'lm' || this.gripKey === 'rm';\n  }\n\n  get isVerticalSizing(): boolean {\n    return this.gripKey === 'tm' || this.gripKey === 'bm';\n  }\n\n  get isSizingFromTop(): boolean {\n    return (\n      this.gripKey === 'tl' || this.gripKey === 'tm' || this.gripKey === 'tr'\n    );\n  }\n  get isSizingFromLeft(): boolean {\n    return (\n      this.gripKey === 'tl' || this.gripKey === 'lm' || this.gripKey === 'bl'\n    );\n  }\n  get isRotating(): boolean {\n    return this.gripKey === 'rotate';\n  }\n\n  get orientation(): string {\n    return this.gripKey.substr(0, 1);\n  }\n\n  get reverseOrientation(): string {\n    const o = this.orientation;\n    return this.orientations.find(x => x.includes(o)).replace(o, '');\n  }\n\n  minHeight = 40;\n  minWidth = 40;\n\n  cursor: string;\n  gripKey: string;\n  constructor() {}\n\n  orientations = ['tb', 'rl'];\n\n  removeSizingGrips(parent: HTMLElement, renderer: Renderer2) {\n    Array.from(parent.children).forEach(child => {\n      if (child.className.indexOf('grip-container') > -1) {\n        renderer.removeChild(parent, child);\n      }\n    });\n  }\n\n  createSizingOverlay(element: HTMLElement): HTMLElement {\n    const result = element.cloneNode(false) as HTMLElement;\n    this.renderer.addClass(result, 'hpc-sizer-overlay');\n    this.renderer.setStyle(result, 'border-style', 'solid');\n    this.renderer.setStyle(result, 'cursor', 'inherit');\n    return result;\n  }\n\n  sizeElementsBy(delta: Point, elements: HTMLElement[]) {\n    elements.forEach(element => {\n      this.sizeElementBy(delta, element);\n    });\n  }\n\n  sizeElementBy(delta: Point, element: HTMLElement) {\n    const currentBounds = dom.elementBounds(element);\n    let height = currentBounds.height + delta.y;\n    let width = currentBounds.width + delta.x;\n    let left = currentBounds.left;\n    let top = currentBounds.top;\n\n    if (this.isSizingFromTop) {\n      top = currentBounds.top + delta.y;\n      height = currentBounds.height - delta.y;\n      if (this.gripKey === 'tm') {\n        width = currentBounds.width;\n      }\n    }\n    if (this.isSizingFromLeft) {\n      left = currentBounds.left + delta.x;\n      width = currentBounds.width - delta.x;\n      if (this.gripKey === 'lm') {\n        height = currentBounds.height;\n      }\n    }\n\n    if (this.isHorizontalSizing) {\n      height = currentBounds.height;\n    }\n    if (this.isVerticalSizing) {\n      width = currentBounds.width;\n    }\n\n    let boundsRect = new Rect(left, top, width, height);\n    if (width < this.minWidth || height < this.minHeight) {\n      boundsRect = currentBounds;\n    }\n    dom.setElementRect(this.renderer, boundsRect, element);\n  }\n\n  prepareToSize() {}\n\n  canSize(element: Element): boolean {\n    return dom.elementSizable(element);\n  }\n\n  addSizingGrips(parentEl: HTMLElement, renderer: Renderer2): void {\n    const html = `\n      <div class=\"grip-container\">\n        <div class=\"grip-container-l\">\n          <div gripKey=\"tl\" class=\"grip grip-tl\"></div>\n          <div gripKey=\"lm\" class=\"grip grip-lm\"></div>\n          <div gripKey=\"bl\" class=\"grip grip-bl\"></div>\n        </div>\n        <div class=\"grip-container-m\">\n          <div gripKey=\"tm\" class=\"grip grip-tm\"></div>\n          <div gripKey=\"bm\" class=\"grip grip-bm\"></div>\n        </div>\n        <div class=\"grip-container-r\">\n          <div gripKey=\"tr\" class=\"grip grip-tr\"></div>\n          <div gripKey=\"rm\" class=\"grip grip-rm\"></div>\n          <div gripKey=\"br\" class=\"grip grip-br\"></div>\n        </div>\n      </div>\n     `;\n    // const selector = renderer.createElement('div');\n    renderer.setProperty(parentEl, 'innerHTML', html);\n  }\n\n  ngOnDestroy(): void {\n    this.renderer = null;\n  }\n}\n","import { Injectable, Renderer2, OnDestroy, ComponentFactoryResolver, Injector} from '@angular/core';\nimport { Rect, Point } from '../scripts/math';\nimport * as dom from '../scripts/dom';\nimport { SizeService } from '../services/size.service';\nimport { DragService } from '../services/drag.service';\n\nexport interface ISelector {\n  selectorEl: HTMLElement;\n  overlay: HTMLElement;\n  clientEl: HTMLElement;\n}\n\nexport enum SelectionState {\n  Draggable,\n  Sizable,\n  Idle\n}\n\nexport enum NudgeType {\n  Overlay,\n  Selector\n}\n\n@Injectable()\nexport class SelectorService implements OnDestroy {\n  private _lassoSelector: HTMLElement = null;\n  private _selectors = new Array<ISelector>();\n\n  scale: number;\n  lassoCursor = 'crosshair';\n  renderer: Renderer2;\n  interactionHost: HTMLElement;\n  shouldAllowSizing = true;\n  isLassoSelectable = true;\n\n  private _activeSelector: ISelector;\n  get activeSelector(): ISelector {\n    return this._activeSelector;\n  }\n\n  private _state: SelectionState;\n  public get state(): SelectionState {\n    return this._state;\n  }\n  public set state(value: SelectionState) {\n    if (value !== this._state) {\n      this._state = value;\n      if (this.state !== SelectionState.Idle) {\n        this.createSelectionOverlays();\n      }\n    }\n  }\n\n  get hasLasso(): boolean {\n    return this._lassoSelector !== null;\n  }\n\n  get hasElementSelectors(): boolean {\n    return Array.from(this._selectors.entries()).length > 0;\n  }\n\n  get selectors(): ISelector[] {\n    return this._selectors;\n  }\n\n  /**\n   * Represents all selector elements hovering above the captured elements\n   */\n  get selectorElements(): HTMLElement[] {\n    return this.selectors.map(x => x.selectorEl);\n  }\n\n  /**\n   * Represents all the captured elements\n   *\n   */\n  get clients(): HTMLElement[] {\n    return this.selectors.map(x => x.clientEl);\n  }\n\n    get selectableElements(): HTMLElement[] {\n    const children = dom.childrenOf(this.interactionHost).filter(x => dom.isSelectable(x));\n    return children;\n  }\n\n  constructor(\n    private _sizeService: SizeService,\n    private _dragService: DragService,\n    private _componentFactoryResolver: ComponentFactoryResolver,\n    private _injector: Injector\n  ) {}\n\n  createlassoSelector(left: number, top: number) {\n    this.clearSelectors();\n    if (this.isLassoSelectable) {\n      const selector = this.createSelector(left, top, this.interactionHost);\n      this.renderer.setStyle(this.interactionHost, 'cursor', this.lassoCursor);\n      this.renderer.addClass(selector, 'hpc-lasso-selector');\n      this._lassoSelector = selector;\n    }\n  }\n\n  removelassoSelector() {\n    if (this._lassoSelector) {\n      this.renderer.removeChild(this.interactionHost, this._lassoSelector);\n      this._lassoSelector = null;\n    }\n  }\n\n  selectorAtPoint(point: Point): ISelector {\n    for (let index = 0; index < this.selectors.length; index++) {\n      const selector = this.selectors[index];\n      const element = selector.selectorEl;\n      const elRect = element.getBoundingClientRect();\n      const rect = new Rect(\n        elRect.left,\n        elRect.top,\n        elRect.width,\n        elRect.height\n      );\n      if (dom.pointInRect(point, rect)) {\n        return selector;\n      }\n    }\n  }\n\n  selectCapturedElements() {\n    const rect = dom.elementBounds(this._lassoSelector);\n    const capturedElements = dom.elementsAtRect(this.interactionHost, rect, [\n      this._lassoSelector\n    ]);\n    capturedElements.forEach(el => {\n      this.selectElement(el, false, this.shouldAllowSizing);\n    });\n    this.removelassoSelector();\n  }\n\n  unSelectAll() {\n    this.clearSelectors();\n  }\n\n  unSelectElement(element: HTMLElement) {\n    const selector = this.selectors.find(x => x.clientEl === element);\n    if (selector) {\n      this.clearSelector(selector);\n    }\n  }\n\n  selectAll() {\n    this.clearSelectors();\n    const children = this.selectableElements;\n    children.forEach(child => {\n        this.selectElement(child, false);\n    });\n  }\n\n  selectElement(element: HTMLElement, clearFirst = true, isSizable = true) {\n    let selector = this.selectors.find(\n      x =>\n        x.selectorEl === element ||\n        x.clientEl === element ||\n        x.overlay === element\n    );\n    if (element.hasAttribute('gripKey')) {\n      selector = this.selectors.find(\n        x => x.selectorEl === element.parentElement.parentElement.parentElement\n      );\n      const cursor = getComputedStyle(element).cursor;\n      this.renderer.setStyle(this.interactionHost, 'cursor', cursor);\n      this._sizeService.gripKey = element.getAttribute('gripKey');\n      this.state = SelectionState.Sizable;\n      return;\n    }\n\n    if (selector) {\n      this.state = SelectionState.Idle;\n      this._activeSelector = selector;\n      return;\n    }\n    if (clearFirst) {\n      this.clearSelectors();\n    }\n    const rect = dom.elementBounds(element);\n    const selectorEl = this.createSelector(\n      rect.left,\n      rect.top,\n      element.parentElement\n    );\n    selectorEl['isSelector'] = true;\n    dom.assignBoundingRect(this.renderer, element, selectorEl);\n    this.renderer.addClass(selectorEl, 'hpc-element-selector');\n    selector = { clientEl: element, selectorEl: selectorEl, overlay: null };\n    this._selectors.push(selector);\n    this._activeSelector = selector;\n    if (isSizable && this._sizeService.canSize(element)) {\n      this._sizeService.addSizingGrips(selectorEl, this.renderer);\n    }\n    if (dom.elementDraggable(element)) {\n      this.renderer.setStyle(this.interactionHost, 'cursor', 'move');\n    }\n    this.state = SelectionState.Idle;\n  }\n\n  createSelectionOverlays() {\n    this.selectors.forEach(selector => {\n      this._sizeService.removeSizingGrips(selector.selectorEl, this.renderer);\n      if (selector.overlay) {\n        this.renderer.removeChild(\n          selector.selectorEl.parentElement,\n          selector.overlay\n        );\n      }\n      if (\n        this.state === SelectionState.Sizable &&\n        this._sizeService.canSize(selector.clientEl)\n      ) {\n        selector.overlay = this._sizeService.createSizingOverlay(\n          selector.selectorEl\n        );\n      } else if (\n        this.state === SelectionState.Draggable &&\n        this._dragService.canDrag(selector.clientEl)\n      ) {\n        selector.overlay = this._dragService.createDragOverlay(\n          selector.clientEl\n        );\n      }\n      if (selector.overlay) {\n        this.renderer.appendChild(\n          selector.selectorEl.parentElement,\n          selector.overlay\n        );\n      }\n    });\n  }\n\n  createSelector(left: number, top: number, parent: Element): HTMLElement {\n    const selector = this.renderer.createElement('div');\n    this.renderer.appendChild(parent, selector);\n    this.renderer.setStyle(selector, 'position', 'absolute');\n    this.renderer.setStyle(selector, 'left', left + 'px');\n    this.renderer.setStyle(selector, 'top', top + 'px');\n    this.renderer.setStyle(selector, 'boxSizing', 'border-box');\n    this.renderer.setStyle(selector, 'zIndex', '10000');\n    return selector;\n  }\n\n  clearSelectors() {\n    this.removelassoSelector();\n    const selectors = Array.from(this._selectors.values());\n    selectors.forEach(selector => {\n      this.clearSelector(selector);\n    });\n    this._selectors = [];\n  }\n\n  clearSelector(selector: ISelector) {\n    if (selector === this._activeSelector) {\n      this._activeSelector = null;\n    }\n    this.renderer.removeChild(\n      selector.selectorEl.parentElement,\n      selector.selectorEl\n    );\n    if (selector.overlay) {\n      this.renderer.removeChild(\n        selector.overlay.parentElement,\n        selector.overlay\n      );\n    }\n    this.selectors.splice(this.selectors.indexOf(selector), 1);\n  }\n\n  resizeLasso(width: number, height: number, initialPos: Point) {\n    if (height < 0) {\n      height = Math.abs(height);\n      const top = initialPos.y - height;\n      this.renderer.setStyle(this._lassoSelector, 'top', top + 'px');\n    }\n    if (width < 0) {\n      width = Math.abs(width);\n      const left = initialPos.x - width;\n      this.renderer.setStyle(this._lassoSelector, 'left', left + 'px');\n    }\n    this.renderer.setStyle(this._lassoSelector, 'height', height + 'px');\n    this.renderer.setStyle(this._lassoSelector, 'width', width + 'px');\n  }\n\n  resizeSelectorsBy(delta: Point) {\n    const selectors = this.selectors.map(x => x.selectorEl);\n    this._sizeService.sizeElementsBy(delta, selectors);\n  }\n\n  resizeOverlaysBy(delta: Point) {\n    const overlays = this.selectors.map(x => x.overlay);\n    this._sizeService.sizeElementsBy(delta, overlays);\n  }\n\n  moveSelectorsBy(delta: Point) {\n    const selectors = this.selectors.map(x => x.overlay);\n    this._dragService.dragElementsBy(delta, selectors);\n  }\n\n  moveOverlaysBy(delta: Point) {\n    const overlays = this.selectors.map(x => x.overlay);\n    this._dragService.dragElementsBy(delta, overlays);\n  }\n\n  reselect() {\n    const clients = this.clients;\n    this.clearSelectors();\n    clients.forEach(client => {\n      this.selectElement(client, false, this.shouldAllowSizing);\n    });\n  }\n\n  nudgeBy(delta: Point, nodgeType: NudgeType) {\n    if (delta.x === 0 && delta.y === 0) {\n      return;\n    }\n    if (this.state === SelectionState.Sizable) {\n      if (nodgeType === NudgeType.Selector) {\n        this.resizeSelectorsBy(delta);\n      }\n      if (nodgeType === NudgeType.Overlay) {\n        this.resizeOverlaysBy(delta);\n      }\n    } else if (this.state === SelectionState.Draggable) {\n      if (nodgeType === NudgeType.Selector) {\n        this.moveSelectorsBy(delta);\n      }\n      if (nodgeType === NudgeType.Overlay) {\n        this.moveOverlaysBy(delta);\n      }\n    } else {\n      this.state = SelectionState.Draggable;\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.clearSelectors();\n    this.renderer = null;\n    this.interactionHost = null;\n  }\n}\n","import {Injectable, Renderer2, OnDestroy} from '@angular/core';\nimport { Subject, Observable, BehaviorSubject} from 'rxjs';\nimport { SelectorService } from '../selector/selector.service';\nimport * as dom from '../scripts/dom';\n\n@Injectable()\nexport class InteractionService implements OnDestroy {\n  private _deleteElementSubject = new Subject<Element>();\n  deleteElement$ = this._deleteElementSubject.asObservable();\n\n  private _deleteElementsSubject = new Subject<Element[]>();\n  deleteElements$ = this._deleteElementSubject.asObservable();\n\n  private _deleteSelectedElementsSubject = new Subject();\n  deleteSelectedElements$ = this._deleteSelectedElementsSubject.asObservable();\n\n  private _addElementSubject = new Subject<Element>();\n  addElement$ = this._addElementSubject.asObservable();\n\n  private _selectedElementsSubject = new BehaviorSubject<Element[]>(null);\n  selectedElements$ = this._selectedElementsSubject.asObservable();\n\n  private _selectedElements: Element[] = [];\n  get selectedElements(): Element[] {\n    return this._selectedElements;\n  }\n  set selectedElements(elements: Element[]) {\n    this._selectedElements = elements;\n    this._selectedElementsSubject.next(elements);\n  }\n  get hasSelectedElements(): boolean {\n    return this._selectedElements && this._selectedElements.length > 0;\n  }\n\n  get canSelectElements(): boolean {\n    return this._selectionService.selectableElements.length > 0;\n  }\n\n  renderer: Renderer2;\n  interactionHost: HTMLElement;\n\n  constructor(private _selectionService: SelectorService) { }\n\n  /**\n   * remove an element from the interaction host\n   * @param element - the element to remove\n   * @param renderer - the renderer used to remove the element\n   */\n  deleteElement(element: Element) {\n     this.renderer.removeChild(element.parentElement, element);\n     this._deleteElementSubject.next(element);\n  }\n\n  /**\n   * remove a list of elements from the interaction host\n   * @param element - the elements to remove\n   * @param renderer - the renderer used to remove the elements\n   */\n  deleteElements(elements: Element[]) {\n    elements.forEach(element => {\n      this.renderer.removeChild(element.parentElement, element);\n    });\n    this._deleteElementsSubject.next(elements);\n  }\n\n  deleteSelectedElements() {\n    this._deleteSelectedElementsSubject.next();\n  }\n\n  deleteAll() {\n    this._selectionService.unSelectAll();\n    const children = dom.childrenOf(this.interactionHost);\n    for (let index = children.length - 1; index >= 0; index--) {\n      const element = children[index];\n      this.renderer.removeChild(this.interactionHost, element);\n    }\n  }\n\n  addElement(element: Element = null) {\n    if (!element) {\n       element = this.renderer.createElement('div');\n       this.renderer.addClass(element, 'hpc-new-element');\n    }\n    this.renderer.setStyle(element, 'box-sizing', 'border-box');\n    this.renderer.setStyle(element, 'position', 'absolute');\n    this.renderer.appendChild(this.interactionHost, element);\n    this._selectionService.selectElement(element as HTMLElement);\n    this.interactionHost.focus();\n    this._addElementSubject.next(element);\n  }\n\n  addContainer(element: Element = null) {\n    if (!element) {\n      element = this.renderer.createElement('div');\n      this.renderer.addClass(element, 'hpc-new-element');\n    }\n    this.renderer.addClass(element, 'hpc-dropzone');\n    this.renderer.addClass(element, 'hpc-container');\n    this.addElement(element);\n  }\n\n  selectAll() {\n    this._selectionService.selectAll();\n    this.selectedElements = this._selectionService.clients;\n  }\n\n  unSelectAll() {\n    this._selectionService.unSelectAll();\n    this.selectedElements = this._selectionService.clients;\n  }\n\n  ngOnDestroy(): void {\n    this.renderer = null;\n  }\n}\n","import {\n  Component, OnInit, ViewEncapsulation, ChangeDetectionStrategy,\n  Input, Renderer2, ViewChild, ElementRef, Output, EventEmitter, OnDestroy\n} from '@angular/core';\nimport { debounceTime, distinctUntilKeyChanged, map } from 'rxjs/operators';\nimport { DragService } from '../services/drag.service';\nimport { SizeService } from '../services/size.service';\nimport { SelectorService, SelectionState, NudgeType } from '../selector/selector.service';\nimport * as dom from '../scripts/dom';\nimport { Point } from '../scripts/math';\nimport { InteractionService } from './interaction.service';\nimport { Subject, Observable, Subscription } from 'rxjs';\n\n\nexport type ICancellable = ( value: any )  => boolean;\n\n/**\n * Handles selection, sizing, deletions, and dragging interactions with any child Element.\n */\n\n@Component({\n  selector: 'hpc-interaction',\n  templateUrl: './interaction.component.html',\n  styleUrls: ['./interaction.component.css'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class InteractionComponent implements OnInit, OnDestroy {\n  private _isMouseDown = false;\n  private _mouseDownPos = new Point();\n  private _lastMousePos: Point;\n  private _cursor: string;\n  private _lastDropZone: HTMLElement;\n  private _deleteSelectedElementsSubscription: Subscription;\n  private _addElementSubscription: Subscription;\n\n  @ViewChild('interactionContainer')\n  private _el: ElementRef;\n  private _keyDownSubject = new Subject<KeyboardEvent>();\n\n  /**\n   * Scale value to apply to the Interaction host element.  The value is applied\n   * to both scaleX and scaleY of the host element.\n   */\n  @Input()\n  scale = 1;\n\n  /**\n   * Determins if elements span when sized or dragged\n   */\n  @Input()\n  snap = 0;\n\n  /**\n   * Gets or sets the minimum width of the element when drag-sized.\n   */\n  @Input()\n  minSizingWidth = 30;\n\n  /**\n   * Gets or sets the minimum height of the element when drag-sized.\n   */\n  @Input()\n  minSizingHeight = 30;\n\n  /**\n   * Determines if elements can be selected by dragging around (lasso) them and releasing the pointer.\n   */\n  @Input()\n  isLassoSelectable = true;\n\n  /**\n   * Optionally set \"checkers\" background for the interaction host.  Useful when building IDE-like interactive UI.\n   */\n  @Input()\n  isCheckersBackground = false;\n\n  @Output()\n  resizedElement = new EventEmitter<HTMLElement>();\n  @Output()\n  resizedElements = new EventEmitter<HTMLElement[]>();\n  @Output()\n  movedElement = new EventEmitter<HTMLElement>();\n  @Output()\n  movedElements = new EventEmitter<HTMLElement[]>();\n  @Output()\n  selectElement = new EventEmitter<HTMLElement>();\n\n  @Input()\n  canDelete: ICancellable = () => true\n\n  @Input()\n  canDrop: ICancellable = () => true\n\n  constructor(\n    private _renderer: Renderer2,\n    private _dragService: DragService,\n    private _sizeService: SizeService,\n    private _interactionService: InteractionService,\n    private _selectionService: SelectorService\n  ) {\n    this._selectionService.renderer = this._renderer;\n    this._sizeService.renderer = this._renderer;\n    this._dragService.renderer = this._renderer;\n    this._interactionService.renderer = this._renderer;\n    this._keyDownSubject.subscribe(e => this.keyDownHandler(e));\n  }\n\n  /**\n   * Called when the keyboard key is released.\n   * @param e KeyboardEvent\n   */\n  keyUp(e: KeyboardEvent) {\n    if (e.code === 'Delete' && this._selectionService.selectors.length > 0) {\n      this.deleteSelectedElements();\n    }\n  }\n\n  /**\n   * Called when the keyboard key is pressed.\n   * @param e KeyboardEvent\n   */\n  keyPress(e) {\n    if (this._selectionService.selectors.length > 0) {\n      e.stopPropagation();\n    }\n  }\n\n  /**\n   * Called when the keyboard key is pressed.\n   * @param e KeyboardEvent\n   */\n  keyDown(e: KeyboardEvent) {\n    this._keyDownSubject.next(e);\n  }\n\n  keyDownHandler(e: KeyboardEvent) {\n    // debounceTime(5000);\n    /*    if (\n      e.code !== 'Delete' &&\n      e.code !== 'Escape' &&\n      e.code !== 'ArrowLeft' &&\n      e.code !== 'ArrowUp' &&\n      e.code !== 'ArrowRight' &&\n      e.code !== 'ArrowDown'\n    ) {\n      return;\n    }*/\n    if (this._selectionService.selectors.length > 0) {\n      let delta: Point;\n      const snap = this.snap ? this.snap : 1;\n      if (e.code === 'Escape') {\n        this.cancelSelection();\n      }\n      if (e.shiftKey) {\n        if (e.ctrlKey) {\n          switch (\n            e.code\n            /*         case 37:\n              self.alignSelectedElements(AlignPosition.Left);\n              break;\n            case 38:\n              self.alignSelectedElements(AlignPosition.Top);\n              break;\n            case 39:\n              self.alignSelectedElements(AlignPosition.Right);\n              break;\n            case 40:\n              self.alignSelectedElements(AlignPosition.Bottom);\n              break; */\n          ) {\n          }\n        } else {\n          delta = new Point();\n          switch (e.code) {\n            case 'ArrowLeft':\n              delta = new Point(-snap, 0);\n              break;\n            case 'ArrowUp':\n              delta = new Point(0, -snap);\n              break;\n            case 'ArrowRight':\n              delta = new Point(snap, 0);\n              break;\n            case 'ArrowDown':\n              delta = new Point(0, snap);\n              break;\n          }\n          this._sizeService.gripKey = 'keyboard';\n          this._sizeService.sizeElementsBy(\n            delta,\n            this._selectionService.selectorElements\n          );\n          this._sizeService.sizeElementsBy(\n            delta,\n            this._selectionService.clients\n          );\n        }\n      } else {\n        delta = new Point();\n        switch (e.code) {\n          case 'ArrowLeft':\n            delta = new Point(-snap, 0);\n            break;\n          case 'ArrowUp':\n            delta = new Point(0, -snap);\n            break;\n          case 'ArrowRight':\n            delta = new Point(snap, 0);\n            break;\n          case 'ArrowDown':\n            delta = new Point(0, snap);\n            break;\n        }\n\n        this._dragService.dragElementsBy(\n          delta,\n          this._selectionService.selectorElements\n        );\n        this._dragService.dragElementsBy(delta, this._selectionService.clients);\n      }\n    }\n  }\n\n  /**\n   * Ensures that the default HTML5 dragging operations do not execute.\n   */\n  dragStart() {\n    // -- prevent default drag\n    return false;\n  }\n\n  /**\n   * Called when the pointer is moved.\n   * @param e PointerEvent\n   */\n  pointerMove(e: PointerEvent) {\n    e.preventDefault();\n    if (this._isMouseDown) {\n      let mousePos = this.getRelativePointerPos(e);\n      if (this._selectionService.hasLasso) {\n        const mouseDownPos = this._mouseDownPos;\n        this._selectionService.resizeLasso(\n          mousePos.x - mouseDownPos.x,\n          mousePos.y - mouseDownPos.y,\n          mouseDownPos\n        );\n      } else if (this._selectionService.selectors.length > 0) {\n        const mouseChange = this.getPointerChange(e);\n        this._selectionService.nudgeBy(mouseChange[0], NudgeType.Overlay);\n        mousePos = mouseChange[1];\n        this._lastDropZone = this._dragService.updateDropZone(\n          this._selectionService.activeSelector.overlay,\n          this._el.nativeElement,\n          [this._selectionService.activeSelector.clientEl]\n        );\n      }\n      this._lastMousePos = mousePos;\n    } else {\n      this.ensureCursor(e);\n    }\n  }\n\n  /**\n   * Called when the pointer is pressed.\n   * @param e PointerEvent\n   */\n  pointerDown(e: PointerEvent) {\n    this._isMouseDown = true;\n    this._mouseDownPos = this.getRelativePointerPos(e);\n    this._lastMousePos = this._mouseDownPos;\n    if (e.target === this._el.nativeElement) {\n      this._selectionService.createlassoSelector(\n        this._mouseDownPos.x,\n        this._mouseDownPos.y\n      );\n    } else {\n      const element = e.target as HTMLElement;\n      this._selectionService.selectElement(element, !e.shiftKey);\n    }\n  }\n\n  /**\n   * Called when the pointer is released.\n   * @param e PointerEvent\n   */\n  pointerUp(e: PointerEvent) {\n    this._isMouseDown = false;\n    if (this._selectionService.hasLasso) {\n      this._selectionService.selectCapturedElements();\n    } else {\n      if (this._selectionService.state === SelectionState.Draggable) {\n        this.moveSelectedElements(NudgeType.Overlay, false);\n        this.tryDropSelectedElements();\n      } else if (this._selectionService.state === SelectionState.Sizable) {\n        this.resizeSelectedElements();\n      }\n      this._dragService.clearDropZones(this._el.nativeElement);\n    }\n    this._renderer.setStyle(this._el.nativeElement, 'cursor', this._cursor);\n    this._lastDropZone = null;\n    this._interactionService.selectedElements = this._selectionService.clients;\n  }\n\n\n  /**\n   * Attemps to drop the currently selected elements into a drop zone\n   * @param e PointerEvent\n   */\n  tryDropSelectedElements() {\n    const selectors = this._selectionService.selectors;\n    selectors.forEach(selector => {\n      if (this.canDrop(selector.clientEl)) {\n        this._dragService.dropElement(\n          this._lastDropZone,\n          selector.clientEl,\n          this._el.nativeElement\n        );\n      }\n    });\n    this._selectionService.reselect();\n  }\n\n  /**\n   * Ensures that the appropriate cursor is set when element is draggable.\n   * @param e PointerEvent\n   */\n  ensureCursor(e: PointerEvent) {\n    const mousePos = new Point(e.pageX, e.pageY);\n    const selector = this._selectionService.selectorAtPoint(mousePos);\n    if (selector && dom.elementDraggable(selector.clientEl)) {\n      this._renderer.setStyle(this._el.nativeElement, 'cursor', 'move');\n    } else {\n      this._renderer.setStyle(this._el.nativeElement, 'cursor', 'default');\n    }\n  }\n\n  /**\n   * Resizes the selected elements to match the Selector overlay\n   */\n  resizeSelectedElements() {\n    const selectors = this._selectionService.selectors;\n    const sizedElements = [];\n    selectors.forEach(selector => {\n      if (dom.elementSizable(selector.clientEl)) {\n        sizedElements.push(selector.clientEl);\n        dom.assignBoundingRect(\n          this._renderer,\n          selector.overlay,\n          selector.clientEl\n        );\n        this.resizedElement.emit(selector.clientEl);\n      }\n    });\n    this.resetSelection();\n    if (sizedElements.length > 0) {\n      this.resizedElements.emit(sizedElements);\n    }\n  }\n\n  /**\n   * Moves selected elements to the current location of the selector or selector overlay.\n   * @param nudgeType determines where the selected elements should be moved.  Options are\n   * to move to the actual selector (NudgeType.Selector) or the selector overlay (NodgeType.Overlay).\n   * Usually only the overlay is dragged/moved, hence the default of NudgeType.Overlay.\n   * @param resetAfterMove determines if the selector should reset itself after every move.\n   */\n  moveSelectedElements(\n    nudgeType: NudgeType = NudgeType.Overlay,\n    resetAfterMove = true\n  ) {\n    const selectors = this._selectionService.selectors;\n    const movedElements = [];\n    selectors.forEach(selector => {\n      if (dom.elementDraggable(selector.clientEl)) {\n        movedElements.push(selector.clientEl);\n        dom.assignPosition(\n          this._renderer,\n          nudgeType === NudgeType.Overlay\n            ? selector.overlay\n            : selector.selectorEl,\n          selector.clientEl\n        );\n        this.movedElement.emit(selector.clientEl);\n      }\n    });\n    if (resetAfterMove) {\n      this.resetSelection();\n    }\n    if (movedElements.length > 0) {\n      this.movedElements.emit(movedElements);\n    }\n  }\n\n  /**\n   * Deletes selected elements.\n   */\n  deleteSelectedElements() {\n    const selectors = this._selectionService.selectors;\n    const deletedElements = [];\n    for (let index = selectors.length - 1; index >= 0; index--) {\n      const selector = selectors[index];\n      if (this.canDelete(selector.clientEl)) {\n        const el = selector.clientEl;\n        this._selectionService.clearSelector(selector);\n        this._interactionService.deleteElement(el);\n        deletedElements.push(el);\n      }\n    }\n    this._interactionService.deleteElements(deletedElements);\n    this._interactionService.selectedElements = this._selectionService.clients;\n  }\n\n  /**\n   * Add a new child element to the host element.\n   */\n  addElement(element: Element) {\n    const selector = this._selectionService.activeSelector;\n    const parent = selector && dom.isContainer(selector.clientEl) ? selector.clientEl : this._el.nativeElement;\n    this._renderer.appendChild(parent, element);\n  }\n\n  /**\n   * Gets the mouse position relative to the offset and scale of the host element.\n   * @param e PointerEvent\n   */\n  getRelativePointerPos(e: PointerEvent) {\n    return dom.getRelativePointerPos(e, this._el.nativeElement, this.scale);\n  }\n\n  /**\n   * Gets pointer coordinates changes relative to the selected element.\n   * @param e PointerEvent\n   */\n  getPointerChange(e: PointerEvent): any[] {\n    const pointerPos = this.getRelativePointerPos(e);\n    let left = pointerPos.x - this._lastMousePos.x;\n    let top = pointerPos.y - this._lastMousePos.y;\n    if (this.snap) {\n      if (left % this.snap !== 0) {\n        left = 0;\n        pointerPos.x = this._lastMousePos.x;\n      }\n      if (top % this.snap !== 0) {\n        top = 0;\n        pointerPos.y = this._lastMousePos.y;\n      }\n    }\n    return [new Point(left, top), pointerPos];\n  }\n\n  /**\n   * Re-selects the currently selected elements.  Usually happens after\n   * an element is moved or resized.\n   */\n  resetSelection() {\n    this._selectionService.reselect();\n  }\n\n  /**\n   * Cancels the current selections or drag operation.  If the elements are being dragged,\n   * the drag operation is cancelled and the elements reselected.  Otherwise, the elements\n   * are unselected.\n   */\n  cancelSelection() {\n    if (this._isMouseDown) {\n      this._selectionService.reselect();\n    } else {\n      this._selectionService.clearSelectors();\n    }\n  }\n\n  ngOnInit() {\n    if (this._el.nativeElement && this._renderer) {\n      this._interactionService.interactionHost = this._el.nativeElement;\n      this._selectionService.interactionHost = this._el.nativeElement;\n      this._selectionService.isLassoSelectable = this.isLassoSelectable;\n      this._cursor = getComputedStyle(this._el.nativeElement).cursor;\n      this._deleteSelectedElementsSubscription = this._interactionService.deleteSelectedElements$.subscribe(\n        () => {\n           this.deleteSelectedElements();\n        }\n      );\n      this._addElementSubscription = this._interactionService.addElement$.subscribe(\n        element => {\n          // this.addElement(element);\n        }\n      );\n    }\n  }\n\n  ngOnDestroy(): void {\n    this._lastDropZone = null;\n    this._deleteSelectedElementsSubscription.unsubscribe();\n    this._addElementSubscription.unsubscribe();\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'hpc-composer',\n  templateUrl: './composer.component.html',\n  styleUrls: ['./composer.component.css']\n})\nexport class ComposerComponent implements OnInit {\n\n  @Input() headerVisible = true;\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'hpc-treeview',\n  templateUrl: './treeview.component.html',\n  styleUrls: ['./treeview.component.css']\n})\nexport class TreeviewComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'hpc-treeview-item',\n  templateUrl: './treeview-item.component.html',\n  styleUrls: ['./treeview-item.component.css']\n})\nexport class TreeviewItemComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'hpc-selector',\n  templateUrl: './selector.component.html',\n  styleUrls: ['./selector.component.css']\n})\nexport class SelectorComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'hpc-file-manager',\n  templateUrl: './file-manager.component.html',\n  styleUrls: ['./file-manager.component.css']\n})\nexport class FileManagerComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'hpc-property-grid',\n  templateUrl: './property-grid.component.html',\n  styleUrls: ['./property-grid.component.css']\n})\nexport class PropertyGridComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { InteractionComponent } from './interaction/interaction.component';\nimport { ComposerComponent } from './composer/composer.component';\nimport { TreeviewComponent } from './treeview/treeview.component';\nimport { TreeviewItemComponent } from './treeview/treeview-item/treeview-item.component';\nimport { SelectorComponent } from './selector/selector.component';\nimport {CommonModule} from '@angular/common';\nimport {DragService} from './services/drag.service';\nimport {SizeService} from './services/size.service';\nimport {InteractionService} from './interaction/interaction.service';\nimport {SelectorService} from './selector/selector.service';\nimport { FileManagerComponent } from './file-manager/file-manager.component';\nimport { PropertyGridComponent } from './property-grid/property-grid.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    InteractionComponent,\n    ComposerComponent,\n    TreeviewComponent,\n    TreeviewItemComponent,\n    SelectorComponent,\n    FileManagerComponent,\n    PropertyGridComponent\n  ],\n  exports: [\n    InteractionComponent,\n    ComposerComponent,\n    TreeviewComponent\n  ],\n  providers: [\n    DragService,\n    SizeService,\n    InteractionService,\n    SelectorService\n  ]\n})\nexport class HpComponentsModule { }\n"],"names":["dom.moveElementBy","dom.elementDraggable","dom.offset","dom.elementAtPoint","dom.childrenOf","dom.changeParent","dom.elementBounds","dom.setElementRect","dom.elementSizable","dom.isSelectable","dom.pointInRect","dom.elementsAtRect","dom.assignBoundingRect","dom.assignPosition","dom.isContainer","dom.getRelativePointerPos"],"mappings":";;;;;;;;AAAA;IAOE;KAAiB;;gBALlB,UAAU,SAAC;oBACV,UAAU,EAAE,MAAM;iBACnB;;;;;8BAJD;;;;;;;ACAA,IAAA;IACE,cAAmB,IAAgB,EAAS,GAAe,EAAS,KAAiB,EAAS,MAAkB;uCAA7E;qCAAwB;yCAA0B;2CAA2B;QAA7F,SAAI,GAAJ,IAAI,CAAY;QAAS,QAAG,GAAH,GAAG,CAAY;QAAS,UAAK,GAAL,KAAK,CAAY;QAAS,WAAM,GAAN,MAAM,CAAY;KAAK;IACrH,sBAAI,uBAAK;;;;QAAT;YACE,OAAO,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;SAC/B;;;OAAA;IACD,sBAAI,wBAAM;;;;QAAV;YACE,OAAO,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;SAC/B;;;OAAA;IACD,sBAAI,yBAAO;;;;QAAX;YACE,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,MAAM,CAAC,CAAC;SACzC;;;OAAA;IACD,sBAAI,yBAAO;;;;QAAX;YACE,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;SACvC;;;OAAA;IACD,sBAAI,0BAAQ;;;;QAAZ;YACE,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;SACxC;;;OAAA;IACD,sBAAI,4BAAU;;;;QAAd;YACE,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC1C;;;OAAA;IACD,sBAAI,6BAAW;;;;QAAf;YACE,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC3C;;;OAAA;eAtBH;IAwBC,CAAA;AAxBD,AAyBA,IAAA;IACE,cAAmB,MAAkB,EAAS,KAAiB;2CAA1B;yCAA0B;QAA5C,WAAM,GAAN,MAAM,CAAY;QAAS,UAAK,GAAL,KAAK,CAAY;KAAK;eA1BtE;IA2BC,CAAA;AAFD,AAIA,IAAA;IACE,eAAmB,CAAa,EAAS,CAAa;iCAAtB;iCAAsB;QAAnC,MAAC,GAAD,CAAC,CAAY;QAAS,MAAC,GAAD,CAAC,CAAY;KAAK;;;;;IAC3D,mBAAG;;;;IAAH,UAAI,KAAY;QACd,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;KAC3B;;;;;IACD,wBAAQ;;;;IAAR,UAAS,KAAY;QACnB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;KAC3B;gBAtCH;IAuCC,CAAA;;;;;;ACvCD;;;;AAWA,gBAAuB,EAAe;;IACpC,IAAM,GAAG,GAAG,EAAE,CAAC,qBAAqB,EAAE,CAAC;;IACvC,IAAM,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;;IACpB,IAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;IACtB,OAAO,IAAI,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;CAC7B;;;;;AAED,kBAAyB,KAAa;IACpC,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;QAChC,OAAO,CAAC,CAAC;KACV;;IACD,IAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;IAC3D,OAAO,UAAU,CAAC,QAAQ,CAAC,CAAC;CAC7B;;;;;;AAYD,uBAA8B,OAAoB,EAAE,aAAqB;IAArB,8BAAA,EAAA,qBAAqB;;IACvE,IAAM,MAAM,GAAG,IAAI,KAAK,EAAe,CAAC;IACxC,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,MAAM,CAAC;KACf;;IACD,IAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;IAClC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;QACxC,IAAM,KAAK,qBAAG,QAAQ,CAAC,CAAC,CAAgB,EAAC;QACzC,IAAI,KAAK,IAAI,KAAK,CAAC,aAAa,KAAK,OAAO;YAC1C,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;YACpD,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;YACtD,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;YACxC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACpB;KACF;IAKD,OAAO,MAAM,CAAC;CACf;;;;;AAED,8BAAqC,QAAuB;IAC1D,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;;QAC7C,IAAM,KAAK,qBAAG,QAAQ,CAAC,CAAC,CAAgB,EAAC;QACzC,IAAI,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;YACpD,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC;YACpD,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;YAChD,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;YAC9C,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;YACtC,eAAe,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;SAClC;KACF;CACF;;;;;;AAGD,yBAAgC,KAAY,EAAE,IAAS;;IACrD,IAAM,KAAK,GAAG,QAAO,IAAI,CAAC,KAAK,QAAQ,GAAG,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAE;IACtE,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;QACd,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;KACxB;CACF;;;;;;AAED,mBAA0B,CAAO,EAAE,CAAO;IACxC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,KAAK;QACvB,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,KAAK;QACjB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,MAAM;QACjB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,MAAM,EAAE;CACtB;;;;;;;AAED,wBAAgC,MAAmB,EAAE,IAAU,EAAE,OAA2B;IAA3B,wBAAA,EAAA,YAA2B;;IAC1F,IAAM,MAAM,GAAG,EAAE,CAAC;IAChB,aAAa,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAA,OAAO;QACrC,IAAI,SAAS,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,EAAE;YAC3C,IAAI,OAAO,IAAI,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE;gBACtD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACtB;SACF;KACF,CAAC,CAAC;IACH,OAAO,MAAM,CAAC;CACf;;;;;AAED,oBAA2B,OAAoB;;IAC7C,IAAM,cAAc,GAAG,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACvD,OAAO,IAAI,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;CAC/E;;;;;AAED,qBAA4B,OAAoB;;IAC9C,IAAM,cAAc,GAAG,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACvD,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;CAClF;;;;;;;AAED,uBAA8B,OAAoB,EAAE,cAA+B,EAAE,KAAmB;IAApD,+BAAA,EAAA,sBAA+B;IAAE,sBAAA,EAAA,YAAmB;;IACtG,IAAI,GAAG,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;IAC9B,IAAI,cAAc,EAAE;QAClB,GAAG,GAAG,cAAc,CAAC,OAAO,CAAC,CAAC;KAC/B;;IACD,IAAM,IAAI,GAAG,WAAW,CAAC,OAAO,CAAC,CAAC;IAClC,IAAI,KAAK,EAAE;QACT,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC;KACrC;IACD,OAAO,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;CACxD;;;;;AAED,wBAA+B,OAAoB;;IACjD,IAAM,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;IACnC,IAAI,OAAO,CAAC,aAAa,IAAI,IAAI,EAAE;QACjC,OAAO,MAAM,CAAC;KACf;;IACD,IAAI,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC;;IACpB,IAAI,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC;;IACnB,IAAM,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;IACpC,OAAO,CAAC,OAAO,CAAC,UAAA,MAAM;QACpB,IAAI,IAAI,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,UAAU,CAAC;QACxD,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC;KACtD,CAAC,CAAC;IACH,OAAO,IAAI,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;CAC7B;;;;;;;AAGD,oBAA2B,OAAoB,EAAE,SAA6B,EAAE,SAAiB;IAAhD,0BAAA,EAAA,qBAA6B;IAAE,0BAAA,EAAA,iBAAiB;;IAC/F,IAAM,MAAM,GAAG,IAAI,KAAK,EAAe,CAAC;IACxC,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,MAAM,CAAC;KACf;;IACD,IAAI,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;IACnC,OAAO,MAAM,IAAI,IAAI,EAAE;QACrB,IAAI,CAAC,SAAS,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;YACtD,MAAM;SACP;QACD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACpB,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;YACxC,MAAM;SACP;QACD,MAAM,GAAG,MAAM,CAAC,aAAa,CAAC;KAC/B;IACD,OAAO,MAAM,CAAC;CACf;;;;;;;AAED,uBAA8B,QAAmB,EAAE,OAAoB,EAAE,QAAe;IACtF,IAAI,CAAC,OAAO,EAAE;QAAE,OAAO;KAAE;IACzB,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;IACrD,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;CACvD;;;;;;;AAED,uBAA8B,QAAmB,EAAE,OAAO,EAAE,KAAY;IACtE,IAAI,CAAC,OAAO,EAAE;QAAE,OAAO;KAAE;;IACzB,IAAM,GAAG,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;;IAChC,IAAM,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;;IAC5B,IAAM,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;IAC7B,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC;IAC9C,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;CACjD;;;;;;;AAWD,4BAAmC,QAAmB,EAAE,MAAmB,EAAE,MAAmB;;IAC9F,IAAM,UAAU,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC;;IAEzC,IAAM,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;;IAC3B,IAAM,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC;IAC7B,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC;IAC7C,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;IAC/C,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC;IAC9D,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,EAAE,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC;CAC7D;;;;;;;AAED,wBAA+B,QAAmB,EAAE,MAAmB,EAAE,MAAmB;;IAC1F,IAAM,UAAU,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC;;IACzC,IAAM,GAAG,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;IAC/B,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;IAC/C,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;CACjD;;;;;;;AAED,wBAA+B,QAAmB,EAAE,IAAU,EAAE,OAAoB;IAClF,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC;IACnD,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;IACrD,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC;IACzD,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC;CACxD;;;;;;;AAED,oBAA2B,MAAmB,EAAE,IAAY,EAAE,OAAY;IAA1B,qBAAA,EAAA,YAAY;IAAE,wBAAA,EAAA,YAAY;;IACxE,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,MAAM,EAAE;QACV,IAAI,IAAI,EAAE;YACR,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC;SACnD;aAAM;YACL,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;SACtC;QACD,oBAAoB,CAAC,MAAM,CAAC,CAAC;QAC7B,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,EAAE,CAAC,IAAI,OAAO,CAAC,GAAA,CAAC,CAAC;KAC9C;IACD,OAAO,MAAM,CAAC;CACf;;;;;;AAED,qBAA4B,KAAY,EAAE,IAAU;IAClD,OAAO,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC;CACvG;;;;;;;;;AAMD,wBAA+B,GAAU,EAAE,MAAmB,EAAE,OAAY;IAAZ,wBAAA,EAAA,YAAY;;IACxE,IAAI,MAAM,GAAG,MAAM,CAAC;;IACpB,IAAM,QAAQ,GAAG,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;IACpD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;;QACpD,IAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;;QAC9B,IAAM,MAAM,GAAG,KAAK,CAAC,qBAAqB,EAAE,CAAC;;QAC7C,IAAM,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;QAC5E,IAAI,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,WAAW,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE;YAC3D,MAAM,GAAG,cAAc,CAAC,GAAG,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;YAC7C,MAAM;SACN;KACH;IACD,OAAO,MAAM,CAAC;CACjB;;;;;;;AAiBD,sBAA6B,OAAoB,EAAE,SAAsB,EAAE,QAAmB;IAC5F,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,aAAa,KAAK,SAAS,EAAE;QACrD,OAAO;KACR;;IACD,IAAM,SAAS,GAAG,cAAc,CAAC,SAAS,CAAC,CAAC;;IAC5C,IAAM,KAAK,GAAG,cAAc,CAAC,OAAO,CAAC,CAAC;;IACtC,IAAM,MAAM,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;IACvE,QAAQ,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;IACzC,aAAa,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;CAC1C;;;;;;;AAUD,+BAAsC,CAAe,EAAE,OAAoB,EAAE,KAAS;IAAT,sBAAA,EAAA,SAAS;;IACpF,IAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;IACpC,OAAO,IAAI,KAAK,CACd,CAAC,CAAC,CAAC,KAAK,GAAG,WAAW,CAAC,CAAC,IAAI,KAAK,EACjC,CAAC,CAAC,CAAC,KAAK,GAAG,WAAW,CAAC,CAAC,IAAI,KAAK,CAClC,CAAC;CACH;;;;;AAED,0BAAiC,OAAgB;IAC/C,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;CACnF;;;;;AAED,wBAA+B,OAAgB;IAC7C,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;CACnF;;;;;AAED,uBAA8B,OAAgB;IAC5C,OAAO,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;CACrD;;;;;AAED,qBAA4B,OAAgB;IAC1C,OAAO,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;CACpD;;;;;AAED,sBAA6B,OAAgB;IAC3C,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;CACrD;;;;;;AC9SD;IASE;0BAHa,MAAM;KAGH;;;;;IAEhB,uCAAiB;;;;IAAjB,UAAkB,OAAoB;;QACpC,IAAM,MAAM,qBAAG,OAAO,CAAC,SAAS,CAAC,IAAI,CAAgB,EAAC;QACtD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;QACnD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAC1D,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;QAChD,OAAO,MAAM,CAAC;KACf;;;;;;IAED,oCAAc;;;;;IAAd,UAAe,KAAY,EAAE,QAAuB;QAApD,iBAMC;QALC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO;YACtB,IAAI,OAAO,EAAE;gBACXA,aAAiB,CAAC,KAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;aAClD;SACF,CAAC,CAAC;KACJ;;;;;IAED,6BAAO;;;;IAAP,UAAQ,OAAgB;QACtB,OAAOC,gBAAoB,CAAC,OAAO,CAAC,CAAC;KACtC;;;;;;;;;;;;;;;;;;IAUD,kCAAY;;;;;;;;;IAAZ,UAAa,cAA2B,EAAE,MAAmB,EAAE,OAAY;QAAZ,wBAAA,EAAA,YAAY;QACzE,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO,IAAI,CAAC;SACb;QACD,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;;QAC7B,IAAM,GAAG,GAAGC,MAAU,CAAC,cAAc,CAAC,CAAC;;QACvC,IAAM,EAAE,GAAGC,cAAkB,CAAC,GAAG,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;QACpD,IAAI,EAAE,KAAK,MAAM,IAAI,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;YAC1D,OAAO,EAAE,CAAC;SACX;QACD,OAAO,IAAI,CAAC;KACb;;;;;;;IAED,oCAAc;;;;;;IAAd,UAAe,cAA2B,EAAE,MAAmB,EAAE,OAAY;QAAZ,wBAAA,EAAA,YAAY;QAC3E,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;;QAC5B,IAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;QACpE,IAAI,QAAQ,EAAE;YACZ,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;SAC5C;QACD,OAAO,QAAQ,CAAC;KACjB;;;;;IAED,oCAAc;;;;IAAd,UAAe,MAAmB;QAAlC,iBAKC;;QAJC,IAAM,QAAQ,GAAGC,UAAc,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAC9C,QAAQ,CAAC,OAAO,CAAC,UAAA,KAAK;YACpB,KAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;SAC5C,CAAC,CAAC;KACJ;;;;;;;IAED,iCAAW;;;;;;IAAX,UAAY,QAAqB,EAAE,cAA2B,EAAG,MAAmB;QAChF,IAAI;YACFC,YAAgB,CAAC,cAAc,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC3D;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;;SAEpB;KACJ;;;;IAGD,iCAAW;;;IAAX;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACtB;;gBA5EF,UAAU;;;;sBAJX;;;;;;;ACAA;IA4CE;yBALY,EAAE;wBACH,EAAE;4BAME,CAAC,IAAI,EAAE,IAAI,CAAC;KAFX;IApChB,sBAAI,2CAAkB;;;;QAAtB;YACE,OAAO,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC;SACvD;;;OAAA;IAED,sBAAI,yCAAgB;;;;QAApB;YACE,OAAO,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC;SACvD;;;OAAA;IAED,sBAAI,wCAAe;;;;QAAnB;YACE,QACE,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,EACvE;SACH;;;OAAA;IACD,sBAAI,yCAAgB;;;;QAApB;YACE,QACE,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,EACvE;SACH;;;OAAA;IACD,sBAAI,mCAAU;;;;QAAd;YACE,OAAO,IAAI,CAAC,OAAO,KAAK,QAAQ,CAAC;SAClC;;;OAAA;IAED,sBAAI,oCAAW;;;;QAAf;YACE,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SAClC;;;OAAA;IAED,sBAAI,2CAAkB;;;;QAAtB;;YACE,IAAM,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;YAC3B,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAA,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;SAClE;;;OAAA;;;;;;IAWD,uCAAiB;;;;;IAAjB,UAAkB,MAAmB,EAAE,QAAmB;QACxD,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,UAAA,KAAK;YACvC,IAAI,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,EAAE;gBAClD,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;aACrC;SACF,CAAC,CAAC;KACJ;;;;;IAED,yCAAmB;;;;IAAnB,UAAoB,OAAoB;;QACtC,IAAM,MAAM,qBAAG,OAAO,CAAC,SAAS,CAAC,KAAK,CAAgB,EAAC;QACvD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,mBAAmB,CAAC,CAAC;QACpD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,cAAc,EAAE,OAAO,CAAC,CAAC;QACxD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;QACpD,OAAO,MAAM,CAAC;KACf;;;;;;IAED,oCAAc;;;;;IAAd,UAAe,KAAY,EAAE,QAAuB;QAApD,iBAIC;QAHC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO;YACtB,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;SACpC,CAAC,CAAC;KACJ;;;;;;IAED,mCAAa;;;;;IAAb,UAAc,KAAY,EAAE,OAAoB;;QAC9C,IAAM,aAAa,GAAGC,aAAiB,CAAC,OAAO,CAAC,CAAC;;QACjD,IAAI,MAAM,GAAG,aAAa,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC;;QAC5C,IAAI,KAAK,GAAG,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC;;QAC1C,IAAI,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC;;QAC9B,IAAI,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC;QAE5B,IAAI,IAAI,CAAC,eAAe,EAAE;YACxB,GAAG,GAAG,aAAa,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC;YAClC,MAAM,GAAG,aAAa,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC;YACxC,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,EAAE;gBACzB,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC;aAC7B;SACF;QACD,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,IAAI,GAAG,aAAa,CAAC,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;YACpC,KAAK,GAAG,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC;YACtC,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,EAAE;gBACzB,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;aAC/B;SACF;QAED,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAC3B,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;SAC/B;QACD,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC;SAC7B;;QAED,IAAI,UAAU,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QACpD,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE;YACpD,UAAU,GAAG,aAAa,CAAC;SAC5B;QACDC,cAAkB,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;KACxD;;;;IAED,mCAAa;;;IAAb,eAAkB;;;;;IAElB,6BAAO;;;;IAAP,UAAQ,OAAgB;QACtB,OAAOC,cAAkB,CAAC,OAAO,CAAC,CAAC;KACpC;;;;;;IAED,oCAAc;;;;;IAAd,UAAe,QAAqB,EAAE,QAAmB;;QACvD,IAAM,IAAI,GAAG,mtBAiBX,CAAC;;QAEH,QAAQ,CAAC,WAAW,CAAC,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;KACnD;;;;IAED,iCAAW;;;IAAX;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACtB;;gBArIF,UAAU;;;;sBAJX;;;;;;;ACAA;;IAaE,YAAS;IACT,UAAO;IACP,OAAI;;8BAFJ,SAAS;8BACT,OAAO;8BACP,IAAI;;;IAIJ,UAAO;IACP,WAAQ;;oBADR,OAAO;oBACP,QAAQ;;IAiER,yBACU,cACA,cACA,2BACA;QAHA,iBAAY,GAAZ,YAAY;QACZ,iBAAY,GAAZ,YAAY;QACZ,8BAAyB,GAAzB,yBAAyB;QACzB,cAAS,GAAT,SAAS;8BAhEmB,IAAI;0BACrB,IAAI,KAAK,EAAa;2BAG7B,WAAW;iCAGL,IAAI;iCACJ,IAAI;KAyDpB;IAtDJ,sBAAI,2CAAc;;;;QAAlB;YACE,OAAO,IAAI,CAAC,eAAe,CAAC;SAC7B;;;OAAA;0BAGU,kCAAK;;;;;YACd,OAAO,IAAI,CAAC,MAAM,CAAC;;;;;;kBAEJ,KAAqB;YACpC,IAAI,KAAK,KAAK,IAAI,CAAC,MAAM,EAAE;gBACzB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,IAAI,IAAI,CAAC,KAAK,KAAK,cAAc,CAAC,IAAI,EAAE;oBACtC,IAAI,CAAC,uBAAuB,EAAE,CAAC;iBAChC;aACF;;;;;IAGH,sBAAI,qCAAQ;;;;QAAZ;YACE,OAAO,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC;SACrC;;;OAAA;IAED,sBAAI,gDAAmB;;;;QAAvB;YACE,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;SACzD;;;OAAA;IAED,sBAAI,sCAAS;;;;QAAb;YACE,OAAO,IAAI,CAAC,UAAU,CAAC;SACxB;;;OAAA;IAKD,sBAAI,6CAAgB;;;;;;;;QAApB;YACE,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,UAAU,GAAA,CAAC,CAAC;SAC9C;;;OAAA;IAMD,sBAAI,oCAAO;;;;;;;;;;QAAX;YACE,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,GAAA,CAAC,CAAC;SAC5C;;;OAAA;IAEC,sBAAI,+CAAkB;;;;QAAtB;;YACA,IAAM,QAAQ,GAAGJ,UAAc,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAAK,YAAgB,CAAC,CAAC,CAAC,GAAA,CAAC,CAAC;YACvF,OAAO,QAAQ,CAAC;SACjB;;;OAAA;;;;;;IASD,6CAAmB;;;;;IAAnB,UAAoB,IAAY,EAAE,GAAW;QAC3C,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,IAAI,CAAC,iBAAiB,EAAE;;YAC1B,IAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;YACtE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YACzE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,oBAAoB,CAAC,CAAC;YACvD,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;SAChC;KACF;;;;IAED,6CAAmB;;;IAAnB;QACE,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACrE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC5B;KACF;;;;;IAED,yCAAe;;;;IAAf,UAAgB,KAAY;QAC1B,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;;YAC1D,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;;YACvC,IAAM,OAAO,GAAG,QAAQ,CAAC,UAAU,CAAC;;YACpC,IAAM,MAAM,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;;YAC/C,IAAM,IAAI,GAAG,IAAI,IAAI,CACnB,MAAM,CAAC,IAAI,EACX,MAAM,CAAC,GAAG,EACV,MAAM,CAAC,KAAK,EACZ,MAAM,CAAC,MAAM,CACd,CAAC;YACF,IAAIC,WAAe,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE;gBAChC,OAAO,QAAQ,CAAC;aACjB;SACF;KACF;;;;IAED,gDAAsB;;;IAAtB;QAAA,iBASC;;QARC,IAAM,IAAI,GAAGJ,aAAiB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;;QACpD,IAAM,gBAAgB,GAAGK,cAAkB,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,EAAE;YACtE,IAAI,CAAC,cAAc;SACpB,CAAC,CAAC;QACH,gBAAgB,CAAC,OAAO,CAAC,UAAA,EAAE;YACzB,KAAI,CAAC,aAAa,CAAC,EAAE,EAAE,KAAK,EAAE,KAAI,CAAC,iBAAiB,CAAC,CAAC;SACvD,CAAC,CAAC;QACH,IAAI,CAAC,mBAAmB,EAAE,CAAC;KAC5B;;;;IAED,qCAAW;;;IAAX;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;KACvB;;;;;IAED,yCAAe;;;;IAAf,UAAgB,OAAoB;;QAClC,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,OAAO,GAAA,CAAC,CAAC;QAClE,IAAI,QAAQ,EAAE;YACZ,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;SAC9B;KACF;;;;IAED,mCAAS;;;IAAT;QAAA,iBAMC;QALC,IAAI,CAAC,cAAc,EAAE,CAAC;;QACtB,IAAM,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACzC,QAAQ,CAAC,OAAO,CAAC,UAAA,KAAK;YAClB,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SACpC,CAAC,CAAC;KACJ;;;;;;;IAED,uCAAa;;;;;;IAAb,UAAc,OAAoB,EAAE,UAAiB,EAAE,SAAgB;QAAnC,2BAAA,EAAA,iBAAiB;QAAE,0BAAA,EAAA,gBAAgB;;QACrE,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAChC,UAAA,CAAC;YACC,OAAA,CAAC,CAAC,UAAU,KAAK,OAAO;gBACxB,CAAC,CAAC,QAAQ,KAAK,OAAO;gBACtB,CAAC,CAAC,OAAO,KAAK,OAAO;SAAA,CACxB,CAAC;QACF,IAAI,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE;YACnC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAC5B,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,UAAU,KAAK,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,aAAa,GAAA,CACxE,CAAC;;YACF,IAAM,MAAM,GAAG,gBAAgB,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;YAChD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC/D,IAAI,CAAC,YAAY,CAAC,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;YAC5D,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC,OAAO,CAAC;YACpC,OAAO;SACR;QAED,IAAI,QAAQ,EAAE;YACZ,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC,IAAI,CAAC;YACjC,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;YAChC,OAAO;SACR;QACD,IAAI,UAAU,EAAE;YACd,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;;QACD,IAAM,IAAI,GAAGL,aAAiB,CAAC,OAAO,CAAC,CAAC;;QACxC,IAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CACpC,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,GAAG,EACR,OAAO,CAAC,aAAa,CACtB,CAAC;QACF,UAAU,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;QAChCM,kBAAsB,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;QAC3D,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,EAAE,sBAAsB,CAAC,CAAC;QAC3D,QAAQ,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;QACxE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/B,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;QAChC,IAAI,SAAS,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YACnD,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC7D;QACD,IAAIX,gBAAoB,CAAC,OAAO,CAAC,EAAE;YACjC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;SAChE;QACD,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC,IAAI,CAAC;KAClC;;;;IAED,iDAAuB;;;IAAvB;QAAA,iBA+BC;QA9BC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAA,QAAQ;YAC7B,KAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC;YACxE,IAAI,QAAQ,CAAC,OAAO,EAAE;gBACpB,KAAI,CAAC,QAAQ,CAAC,WAAW,CACvB,QAAQ,CAAC,UAAU,CAAC,aAAa,EACjC,QAAQ,CAAC,OAAO,CACjB,CAAC;aACH;YACD,IACE,KAAI,CAAC,KAAK,KAAK,cAAc,CAAC,OAAO;gBACrC,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAC5C;gBACA,QAAQ,CAAC,OAAO,GAAG,KAAI,CAAC,YAAY,CAAC,mBAAmB,CACtD,QAAQ,CAAC,UAAU,CACpB,CAAC;aACH;iBAAM,IACL,KAAI,CAAC,KAAK,KAAK,cAAc,CAAC,SAAS;gBACvC,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAC5C;gBACA,QAAQ,CAAC,OAAO,GAAG,KAAI,CAAC,YAAY,CAAC,iBAAiB,CACpD,QAAQ,CAAC,QAAQ,CAClB,CAAC;aACH;YACD,IAAI,QAAQ,CAAC,OAAO,EAAE;gBACpB,KAAI,CAAC,QAAQ,CAAC,WAAW,CACvB,QAAQ,CAAC,UAAU,CAAC,aAAa,EACjC,QAAQ,CAAC,OAAO,CACjB,CAAC;aACH;SACF,CAAC,CAAC;KACJ;;;;;;;IAED,wCAAc;;;;;;IAAd,UAAe,IAAY,EAAE,GAAW,EAAE,MAAe;;QACvD,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACpD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;QACzD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;QACtD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC;QACpD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;QACpD,OAAO,QAAQ,CAAC;KACjB;;;;IAED,wCAAc;;;IAAd;QAAA,iBAOC;QANC,IAAI,CAAC,mBAAmB,EAAE,CAAC;;QAC3B,IAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;QACvD,SAAS,CAAC,OAAO,CAAC,UAAA,QAAQ;YACxB,KAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;SAC9B,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;KACtB;;;;;IAED,uCAAa;;;;IAAb,UAAc,QAAmB;QAC/B,IAAI,QAAQ,KAAK,IAAI,CAAC,eAAe,EAAE;YACrC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;SAC7B;QACD,IAAI,CAAC,QAAQ,CAAC,WAAW,CACvB,QAAQ,CAAC,UAAU,CAAC,aAAa,EACjC,QAAQ,CAAC,UAAU,CACpB,CAAC;QACF,IAAI,QAAQ,CAAC,OAAO,EAAE;YACpB,IAAI,CAAC,QAAQ,CAAC,WAAW,CACvB,QAAQ,CAAC,OAAO,CAAC,aAAa,EAC9B,QAAQ,CAAC,OAAO,CACjB,CAAC;SACH;QACD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;KAC5D;;;;;;;IAED,qCAAW;;;;;;IAAX,UAAY,KAAa,EAAE,MAAc,EAAE,UAAiB;QAC1D,IAAI,MAAM,GAAG,CAAC,EAAE;YACd,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;;YAC1B,IAAM,KAAG,GAAG,UAAU,CAAC,CAAC,GAAG,MAAM,CAAC;YAClC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,EAAE,KAAK,EAAE,KAAG,GAAG,IAAI,CAAC,CAAC;SAChE;QACD,IAAI,KAAK,GAAG,CAAC,EAAE;YACb,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;;YACxB,IAAM,IAAI,GAAG,UAAU,CAAC,CAAC,GAAG,KAAK,CAAC;YAClC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,EAAE,MAAM,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;SAClE;QACD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,EAAE,QAAQ,EAAE,MAAM,GAAG,IAAI,CAAC,CAAC;QACrE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,EAAE,KAAK,GAAG,IAAI,CAAC,CAAC;KACpE;;;;;IAED,2CAAiB;;;;IAAjB,UAAkB,KAAY;;QAC5B,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,UAAU,GAAA,CAAC,CAAC;QACxD,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;KACpD;;;;;IAED,0CAAgB;;;;IAAhB,UAAiB,KAAY;;QAC3B,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,GAAA,CAAC,CAAC;QACpD,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;KACnD;;;;;IAED,yCAAe;;;;IAAf,UAAgB,KAAY;;QAC1B,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,GAAA,CAAC,CAAC;QACrD,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;KACpD;;;;;IAED,wCAAc;;;;IAAd,UAAe,KAAY;;QACzB,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,GAAA,CAAC,CAAC;QACpD,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;KACnD;;;;IAED,kCAAQ;;;IAAR;QAAA,iBAMC;;QALC,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,OAAO,CAAC,OAAO,CAAC,UAAA,MAAM;YACpB,KAAI,CAAC,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE,KAAI,CAAC,iBAAiB,CAAC,CAAC;SAC3D,CAAC,CAAC;KACJ;;;;;;IAED,iCAAO;;;;;IAAP,UAAQ,KAAY,EAAE,SAAoB;QACxC,IAAI,KAAK,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,CAAC,KAAK,CAAC,EAAE;YAClC,OAAO;SACR;QACD,IAAI,IAAI,CAAC,KAAK,KAAK,cAAc,CAAC,OAAO,EAAE;YACzC,IAAI,SAAS,KAAK,SAAS,CAAC,QAAQ,EAAE;gBACpC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;aAC/B;YACD,IAAI,SAAS,KAAK,SAAS,CAAC,OAAO,EAAE;gBACnC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;aAC9B;SACF;aAAM,IAAI,IAAI,CAAC,KAAK,KAAK,cAAc,CAAC,SAAS,EAAE;YAClD,IAAI,SAAS,KAAK,SAAS,CAAC,QAAQ,EAAE;gBACpC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;aAC7B;YACD,IAAI,SAAS,KAAK,SAAS,CAAC,OAAO,EAAE;gBACnC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;aAC5B;SACF;aAAM;YACL,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC,SAAS,CAAC;SACvC;KACF;;;;IAED,qCAAW;;;IAAX;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;KAC7B;;gBAhUF,UAAU;;;;gBApBF,WAAW;gBACX,WAAW;gBAJuB,wBAAwB;gBAAE,QAAQ;;0BAA7E;;;;;;;ACAA;IAyCE,4BAAoB,iBAAkC;QAAlC,sBAAiB,GAAjB,iBAAiB,CAAiB;qCAlCtB,IAAI,OAAO,EAAW;8BACrC,IAAI,CAAC,qBAAqB,CAAC,YAAY,EAAE;sCAEzB,IAAI,OAAO,EAAa;+BACvC,IAAI,CAAC,qBAAqB,CAAC,YAAY,EAAE;8CAElB,IAAI,OAAO,EAAE;uCAC5B,IAAI,CAAC,8BAA8B,CAAC,YAAY,EAAE;kCAE/C,IAAI,OAAO,EAAW;2BACrC,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE;wCAEjB,IAAI,eAAe,CAAY,IAAI,CAAC;iCACnD,IAAI,CAAC,wBAAwB,CAAC,YAAY,EAAE;iCAEzB,EAAE;KAmBkB;IAlB3D,sBAAI,gDAAgB;;;;QAApB;YACE,OAAO,IAAI,CAAC,iBAAiB,CAAC;SAC/B;;;;;QACD,UAAqB,QAAmB;YACtC,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC;YAClC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC9C;;;OAJA;IAKD,sBAAI,mDAAmB;;;;QAAvB;YACE,OAAO,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC;SACpE;;;OAAA;IAED,sBAAI,iDAAiB;;;;QAArB;YACE,OAAO,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC;SAC7D;;;OAAA;;;;;;;;;;;IAYD,0CAAa;;;;;IAAb,UAAc,OAAgB;QAC3B,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;QAC1D,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC3C;;;;;;;;;;;IAOD,2CAAc;;;;;IAAd,UAAe,QAAmB;QAAlC,iBAKC;QAJC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO;YACtB,KAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;SAC3D,CAAC,CAAC;QACH,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KAC5C;;;;IAED,mDAAsB;;;IAAtB;QACE,IAAI,CAAC,8BAA8B,CAAC,IAAI,EAAE,CAAC;KAC5C;;;;IAED,sCAAS;;;IAAT;QACE,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC;;QACrC,IAAM,QAAQ,GAAGG,UAAc,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACtD,KAAK,IAAI,KAAK,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE;;YACzD,IAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;SAC1D;KACF;;;;;IAED,uCAAU;;;;IAAV,UAAW,OAAuB;QAAvB,wBAAA,EAAA,cAAuB;QAChC,IAAI,CAAC,OAAO,EAAE;YACX,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC7C,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;SACrD;QACD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;QACxD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;QACzD,IAAI,CAAC,iBAAiB,CAAC,aAAa,mBAAC,OAAsB,EAAC,CAAC;QAC7D,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;QAC7B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KACvC;;;;;IAED,yCAAY;;;;IAAZ,UAAa,OAAuB;QAAvB,wBAAA,EAAA,cAAuB;QAClC,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC7C,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;SACpD;QACD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;QAChD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,eAAe,CAAC,CAAC;QACjD,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KAC1B;;;;IAED,sCAAS;;;IAAT;QACE,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC;QACnC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;KACxD;;;;IAED,wCAAW;;;IAAX;QACE,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC;QACrC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;KACxD;;;;IAED,wCAAW;;;IAAX;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACtB;;gBA5GF,UAAU;;;;gBAHF,eAAe;;6BAFxB;;;;;;;ACAA;;;;IA8FE,8BACU,WACA,cACA,cACA,qBACA;QALV,iBAYC;QAXS,cAAS,GAAT,SAAS;QACT,iBAAY,GAAZ,YAAY;QACZ,iBAAY,GAAZ,YAAY;QACZ,wBAAmB,GAAnB,mBAAmB;QACnB,sBAAiB,GAAjB,iBAAiB;4BAvEJ,KAAK;6BACJ,IAAI,KAAK,EAAE;+BAST,IAAI,OAAO,EAAiB;;;;;qBAO9C,CAAC;;;;oBAMF,CAAC;;;;8BAMS,EAAE;;;;+BAMD,EAAE;;;;iCAMA,IAAI;;;;oCAMD,KAAK;8BAGX,IAAI,YAAY,EAAe;+BAE9B,IAAI,YAAY,EAAiB;4BAEpC,IAAI,YAAY,EAAe;6BAE9B,IAAI,YAAY,EAAiB;6BAEjC,IAAI,YAAY,EAAe;yBAGrB,cAAM,OAAA,IAAI,GAAA;uBAGZ,cAAM,OAAA,IAAI,GAAA;QAShC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;QACjD,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;QAC5C,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;QAC5C,IAAI,CAAC,mBAAmB,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;QACnD,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC,GAAA,CAAC,CAAC;KAC7D;;;;;;;;;;IAMD,oCAAK;;;;;IAAL,UAAM,CAAgB;QACpB,IAAI,CAAC,CAAC,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YACtE,IAAI,CAAC,sBAAsB,EAAE,CAAC;SAC/B;KACF;;;;;;;;;;IAMD,uCAAQ;;;;;IAAR,UAAS,CAAC;QACR,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/C,CAAC,CAAC,eAAe,EAAE,CAAC;SACrB;KACF;;;;;;;;;;IAMD,sCAAO;;;;;IAAP,UAAQ,CAAgB;QACtB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KAC9B;;;;;IAED,6CAAc;;;;IAAd,UAAe,CAAgB;;;;;;;;;;;;QAY7B,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;;YAC/C,IAAI,KAAK,UAAQ;;YACjB,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YACvC,IAAI,CAAC,CAAC,IAAI,KAAK,QAAQ,EAAE;gBACvB,IAAI,CAAC,eAAe,EAAE,CAAC;aACxB;YACD,IAAI,CAAC,CAAC,QAAQ,EAAE;gBACd,IAAI,CAAC,CAAC,OAAO,EAAE;oBACb,QACE,CAAC,CAAC,IAAI;;;;;;;;;;;;;;qBAcP;iBACF;qBAAM;oBACL,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;oBACpB,QAAQ,CAAC,CAAC,IAAI;wBACZ,KAAK,WAAW;4BACd,KAAK,GAAG,IAAI,KAAK,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;4BAC5B,MAAM;wBACR,KAAK,SAAS;4BACZ,KAAK,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;4BAC5B,MAAM;wBACR,KAAK,YAAY;4BACf,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;4BAC3B,MAAM;wBACR,KAAK,WAAW;4BACd,KAAK,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;4BAC3B,MAAM;qBACT;oBACD,IAAI,CAAC,YAAY,CAAC,OAAO,GAAG,UAAU,CAAC;oBACvC,IAAI,CAAC,YAAY,CAAC,cAAc,CAC9B,KAAK,EACL,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CACxC,CAAC;oBACF,IAAI,CAAC,YAAY,CAAC,cAAc,CAC9B,KAAK,EACL,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAC/B,CAAC;iBACH;aACF;iBAAM;gBACL,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;gBACpB,QAAQ,CAAC,CAAC,IAAI;oBACZ,KAAK,WAAW;wBACd,KAAK,GAAG,IAAI,KAAK,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;wBAC5B,MAAM;oBACR,KAAK,SAAS;wBACZ,KAAK,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;wBAC5B,MAAM;oBACR,KAAK,YAAY;wBACf,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;wBAC3B,MAAM;oBACR,KAAK,WAAW;wBACd,KAAK,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;wBAC3B,MAAM;iBACT;gBAED,IAAI,CAAC,YAAY,CAAC,cAAc,CAC9B,KAAK,EACL,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CACxC,CAAC;gBACF,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;aACzE;SACF;KACF;;;;;;;;IAKD,wCAAS;;;;IAAT;;QAEE,OAAO,KAAK,CAAC;KACd;;;;;;;;;;IAMD,0CAAW;;;;;IAAX,UAAY,CAAe;QACzB,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,IAAI,IAAI,CAAC,YAAY,EAAE;;YACrB,IAAI,QAAQ,GAAG,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;YAC7C,IAAI,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE;;gBACnC,IAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC;gBACxC,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAChC,QAAQ,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC,EAC3B,QAAQ,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC,EAC3B,YAAY,CACb,CAAC;aACH;iBAAM,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;;gBACtD,IAAM,WAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC;gBAClE,QAAQ,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;gBAC1B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CACnD,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,OAAO,EAC7C,IAAI,CAAC,GAAG,CAAC,aAAa,EACtB,CAAC,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,QAAQ,CAAC,CACjD,CAAC;aACH;YACD,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;SAC/B;aAAM;YACL,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;SACtB;KACF;;;;;;;;;;IAMD,0CAAW;;;;;IAAX,UAAY,CAAe;QACzB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QACxC,IAAI,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE;YACvC,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CACxC,IAAI,CAAC,aAAa,CAAC,CAAC,EACpB,IAAI,CAAC,aAAa,CAAC,CAAC,CACrB,CAAC;SACH;aAAM;;YACL,IAAM,OAAO,qBAAG,CAAC,CAAC,MAAqB,EAAC;YACxC,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;SAC5D;KACF;;;;;;;;;;IAMD,wCAAS;;;;;IAAT,UAAU,CAAe;QACvB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE;YACnC,IAAI,CAAC,iBAAiB,CAAC,sBAAsB,EAAE,CAAC;SACjD;aAAM;YACL,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,KAAK,cAAc,CAAC,SAAS,EAAE;gBAC7D,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;gBACpD,IAAI,CAAC,uBAAuB,EAAE,CAAC;aAChC;iBAAM,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,KAAK,cAAc,CAAC,OAAO,EAAE;gBAClE,IAAI,CAAC,sBAAsB,EAAE,CAAC;aAC/B;YACD,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;SAC1D;QACD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QACxE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;KAC5E;;;;;;;;;IAOD,sDAAuB;;;;IAAvB;QAAA,iBAYC;;QAXC,IAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC;QACnD,SAAS,CAAC,OAAO,CAAC,UAAA,QAAQ;YACxB,IAAI,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;gBACnC,KAAI,CAAC,YAAY,CAAC,WAAW,CAC3B,KAAI,CAAC,aAAa,EAClB,QAAQ,CAAC,QAAQ,EACjB,KAAI,CAAC,GAAG,CAAC,aAAa,CACvB,CAAC;aACH;SACF,CAAC,CAAC;QACH,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;KACnC;;;;;;;;;;IAMD,2CAAY;;;;;IAAZ,UAAa,CAAe;;QAC1B,IAAM,QAAQ,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;;QAC7C,IAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;QAClE,IAAI,QAAQ,IAAIH,gBAAoB,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;YACvD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;SACnE;aAAM;YACL,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;SACtE;KACF;;;;;;;;IAKD,qDAAsB;;;;IAAtB;QAAA,iBAkBC;;QAjBC,IAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC;;QACnD,IAAM,aAAa,GAAG,EAAE,CAAC;QACzB,SAAS,CAAC,OAAO,CAAC,UAAA,QAAQ;YACxB,IAAIO,cAAkB,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;gBACzC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBACtCI,kBAAsB,CACpB,KAAI,CAAC,SAAS,EACd,QAAQ,CAAC,OAAO,EAChB,QAAQ,CAAC,QAAQ,CAClB,CAAC;gBACF,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;aAC7C;SACF,CAAC,CAAC;QACH,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SAC1C;KACF;;;;;;;;;;;;;;;;IASD,mDAAoB;;;;;;;;IAApB,UACE,SAAwC,EACxC,cAAqB;QAFvB,iBAyBC;QAxBC,0BAAA,EAAA,YAAuB,SAAS,CAAC,OAAO;QACxC,+BAAA,EAAA,qBAAqB;;QAErB,IAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC;;QACnD,IAAM,aAAa,GAAG,EAAE,CAAC;QACzB,SAAS,CAAC,OAAO,CAAC,UAAA,QAAQ;YACxB,IAAIX,gBAAoB,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;gBAC3C,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBACtCY,cAAkB,CAChB,KAAI,CAAC,SAAS,EACd,SAAS,KAAK,SAAS,CAAC,OAAO;sBAC3B,QAAQ,CAAC,OAAO;sBAChB,QAAQ,CAAC,UAAU,EACvB,QAAQ,CAAC,QAAQ,CAClB,CAAC;gBACF,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;aAC3C;SACF,CAAC,CAAC;QACH,IAAI,cAAc,EAAE;YAClB,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;QACD,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SACxC;KACF;;;;;;;;IAKD,qDAAsB;;;;IAAtB;;QACE,IAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC;;QACnD,IAAM,eAAe,GAAG,EAAE,CAAC;QAC3B,KAAK,IAAI,KAAK,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE;;YAC1D,IAAM,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;YAClC,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;;gBACrC,IAAM,EAAE,GAAG,QAAQ,CAAC,QAAQ,CAAC;gBAC7B,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;gBAC/C,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;gBAC3C,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAC1B;SACF;QACD,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QACzD,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;KAC5E;;;;;;;;;IAKD,yCAAU;;;;;IAAV,UAAW,OAAgB;;QACzB,IAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC;;QACvD,IAAM,MAAM,GAAG,QAAQ,IAAIC,WAAe,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC;QAC3G,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;KAC7C;;;;;;;;;;IAMD,oDAAqB;;;;;IAArB,UAAsB,CAAe;QACnC,OAAOC,qBAAyB,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KACzE;;;;;;;;;;IAMD,+CAAgB;;;;;IAAhB,UAAiB,CAAe;;QAC9B,IAAM,UAAU,GAAG,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;;QACjD,IAAI,IAAI,GAAG,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;;QAC/C,IAAI,GAAG,GAAG,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;QAC9C,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;gBAC1B,IAAI,GAAG,CAAC,CAAC;gBACT,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;aACrC;YACD,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;gBACzB,GAAG,GAAG,CAAC,CAAC;gBACR,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;aACrC;SACF;QACD,OAAO,CAAC,IAAI,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,CAAC;KAC3C;;;;;;;;;;IAMD,6CAAc;;;;;IAAd;QACE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;KACnC;;;;;;;;;;;;IAOD,8CAAe;;;;;;IAAf;QACE,IAAI,IAAI,CAAC,YAAY,EAAE;YACrB,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;SACnC;aAAM;YACL,IAAI,CAAC,iBAAiB,CAAC,cAAc,EAAE,CAAC;SACzC;KACF;;;;IAED,uCAAQ;;;IAAR;QAAA,iBAiBC;QAhBC,IAAI,IAAI,CAAC,GAAG,CAAC,aAAa,IAAI,IAAI,CAAC,SAAS,EAAE;YAC5C,IAAI,CAAC,mBAAmB,CAAC,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC;YAClE,IAAI,CAAC,iBAAiB,CAAC,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC;YAChE,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;YAClE,IAAI,CAAC,OAAO,GAAG,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC;YAC/D,IAAI,CAAC,mCAAmC,GAAG,IAAI,CAAC,mBAAmB,CAAC,uBAAuB,CAAC,SAAS,CACnG;gBACG,KAAI,CAAC,sBAAsB,EAAE,CAAC;aAChC,CACF,CAAC;YACF,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,mBAAmB,CAAC,WAAW,CAAC,SAAS,CAC3E,UAAA,OAAO;;aAEN,CACF,CAAC;SACH;KACF;;;;IAED,0CAAW;;;IAAX;QACE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,mCAAmC,CAAC,WAAW,EAAE,CAAC;QACvD,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE,CAAC;KAC5C;;gBA3dF,SAAS,SAAC;oBACT,QAAQ,EAAE,iBAAiB;oBAC3B,wdAA2C;oBAE3C,aAAa,EAAE,iBAAiB,CAAC,IAAI;oBACrC,eAAe,EAAE,uBAAuB,CAAC,MAAM;;iBAChD;;;;gBAxBQ,SAAS;gBAGT,WAAW;gBACX,WAAW;gBAIX,kBAAkB;gBAHlB,eAAe;;;sBA6BrB,SAAS,SAAC,sBAAsB;wBAQhC,KAAK;uBAML,KAAK;iCAML,KAAK;kCAML,KAAK;oCAML,KAAK;uCAML,KAAK;iCAGL,MAAM;kCAEN,MAAM;+BAEN,MAAM;gCAEN,MAAM;gCAEN,MAAM;4BAGN,KAAK;0BAGL,KAAK;;+BA3FR;;;;;;;ACAA;IAUE;6BADyB,IAAI;KACZ;;;;IAEjB,oCAAQ;;;IAAR;KACC;;gBAXF,SAAS,SAAC;oBACT,QAAQ,EAAE,cAAc;oBACxB,w6CAAwC;;iBAEzC;;;;;gCAGE,KAAK;;4BATR;;;;;;;ACAA;IASE;KAAiB;;;;IAEjB,oCAAQ;;;IAAR;KACC;;gBAVF,SAAS,SAAC;oBACT,QAAQ,EAAE,cAAc;oBACxB,0CAAwC;;iBAEzC;;;;4BAND;;;;;;;ACAA;IASE;KAAiB;;;;IAEjB,wCAAQ;;;IAAR;KACC;;gBAVF,SAAS,SAAC;oBACT,QAAQ,EAAE,mBAAmB;oBAC7B,+CAA6C;;iBAE9C;;;;gCAND;;;;;;;ACAA;IASE;KAAiB;;;;IAEjB,oCAAQ;;;IAAR;KACC;;gBAVF,SAAS,SAAC;oBACT,QAAQ,EAAE,cAAc;oBACxB,0CAAwC;;iBAEzC;;;;4BAND;;;;;;;ACAA;IASE;KAAiB;;;;IAEjB,uCAAQ;;;IAAR;KACC;;gBAVF,SAAS,SAAC;oBACT,QAAQ,EAAE,kBAAkB;oBAC5B,8CAA4C;;iBAE7C;;;;+BAND;;;;;;;ACAA;IASE;KAAiB;;;;IAEjB,wCAAQ;;;IAAR;KACC;;gBAVF,SAAS,SAAC;oBACT,QAAQ,EAAE,mBAAmB;oBAC7B,+CAA6C;;iBAE9C;;;;gCAND;;;;;;;ACAA;;;;gBAcC,QAAQ,SAAC;oBACR,OAAO,EAAE;wBACP,YAAY;qBACb;oBACD,YAAY,EAAE;wBACZ,oBAAoB;wBACpB,iBAAiB;wBACjB,iBAAiB;wBACjB,qBAAqB;wBACrB,iBAAiB;wBACjB,oBAAoB;wBACpB,qBAAqB;qBACtB;oBACD,OAAO,EAAE;wBACP,oBAAoB;wBACpB,iBAAiB;wBACjB,iBAAiB;qBAClB;oBACD,SAAS,EAAE;wBACT,WAAW;wBACX,WAAW;wBACX,kBAAkB;wBAClB,eAAe;qBAChB;iBACF;;6BAtCD;;;;;;;;;;;;;;;"}
